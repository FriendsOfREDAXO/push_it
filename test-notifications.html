<!DOCTYPE html>
<html>
<head>
    <title>Push Notification Features Test</title>
    <meta charset="utf-8">
</head>
<body>
    <h1>üß™ Push Notification Browser-Test</h1>
    
    <div id="support-info"></div>
    
    <button onclick="testBasicNotification()">üìù Basic Notification</button>
    <button onclick="testWithIcon()">üñºÔ∏è Mit Icon</button>
    <button onclick="testWithHeroImage()">üé® Mit Hero-Bild</button>
    <button onclick="testWithBadge()">üè∑Ô∏è Mit Badge</button>
    <button onclick="testAll()">üöÄ Alle Features</button>
    
    <div id="results"></div>

    <script>
    // Browser-Support pr√ºfen
    function checkSupport() {
        const info = document.getElementById('support-info');
        let supportText = '<h2>üîç Browser-Support:</h2><ul>';
        
        // Notification API
        if ('Notification' in window) {
            supportText += '<li>‚úÖ Notification API</li>';
        } else {
            supportText += '<li>‚ùå Notification API</li>';
        }
        
        // Service Worker
        if ('serviceWorker' in navigator) {
            supportText += '<li>‚úÖ Service Worker</li>';
        } else {
            supportText += '<li>‚ùå Service Worker</li>';
        }
        
        // Push API
        if ('PushManager' in window) {
            supportText += '<li>‚úÖ Push Manager</li>';
        } else {
            supportText += '<li>‚ùå Push Manager</li>';
        }
        
        // Browser Info
        supportText += '<li>üåê Browser: ' + navigator.userAgent.split(')')[0].split('(')[1] + '</li>';
        supportText += '<li>üì± Platform: ' + navigator.platform + '</li>';
        
        supportText += '</ul>';
        info.innerHTML = supportText;
    }
    
    // Permission anfordern
    async function requestPermission() {
        if ('Notification' in window) {
            const permission = await Notification.requestPermission();
            return permission === 'granted';
        }
        return false;
    }
    
    // Test-Funktionen
    async function testBasicNotification() {
        if (await requestPermission()) {
            new Notification('üß™ Basic Test', {
                body: 'Das ist eine einfache Benachrichtigung ohne Extras.',
                timestamp: Date.now()
            });
            logResult('Basic Notification gesendet');
        }
    }
    
    async function testWithIcon() {
        if (await requestPermission()) {
            new Notification('üñºÔ∏è Icon Test', {
                body: 'Benachrichtigung mit Icon (falls unterst√ºtzt).',
                icon: 'https://via.placeholder.com/192x192/0066cc/ffffff?text=ICON',
                timestamp: Date.now()
            });
            logResult('Notification mit Icon gesendet');
        }
    }
    
    async function testWithHeroImage() {
        if (await requestPermission()) {
            new Notification('üé® Hero-Bild Test', {
                body: 'Das ist eine Benachrichtigung mit Hero-Bild. Wird nur in unterst√ºtzten Browsern angezeigt!',
                icon: 'https://via.placeholder.com/192x192/0066cc/ffffff?text=ICON',
                image: 'https://via.placeholder.com/360x240/cc6600/ffffff?text=HERO+IMAGE',
                timestamp: Date.now()
            });
            logResult('Notification mit Hero-Bild gesendet - Pr√ºfe ob sichtbar!');
        }
    }
    
    async function testWithBadge() {
        if (await requestPermission()) {
            new Notification('üè∑Ô∏è Badge Test', {
                body: 'Benachrichtigung mit Badge (haupts√§chlich Android).',
                icon: 'https://via.placeholder.com/192x192/0066cc/ffffff?text=ICON',
                badge: 'https://via.placeholder.com/72x72/000000/ffffff?text=B',
                timestamp: Date.now()
            });
            logResult('Notification mit Badge gesendet');
        }
    }
    
    async function testAll() {
        if (await requestPermission()) {
            new Notification('üöÄ Volltest', {
                body: 'Alle Features: Icon, Hero-Bild, Badge. Was siehst du?',
                icon: 'https://via.placeholder.com/192x192/0066cc/ffffff?text=ICON',
                image: 'https://via.placeholder.com/360x240/cc6600/ffffff?text=HERO+IMAGE',
                badge: 'https://via.placeholder.com/72x72/000000/ffffff?text=B',
                tag: 'full-test',
                renotify: true,
                timestamp: Date.now()
            });
            logResult('üöÄ Volltest gesendet - Berichte was du siehst!');
        }
    }
    
    function logResult(message) {
        const results = document.getElementById('results');
        const time = new Date().toLocaleTimeString();
        results.innerHTML += '<p>[' + time + '] ' + message + '</p>';
    }
    
    // Init
    checkSupport();
    </script>
    
    <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    button { margin: 10px; padding: 10px 15px; font-size: 16px; cursor: pointer; }
    #support-info { background: #f0f8ff; padding: 15px; border-radius: 5px; margin: 20px 0; }
    #results { background: #f8f8f8; padding: 15px; border-radius: 5px; margin: 20px 0; }
    ul { list-style: none; padding: 0; }
    li { margin: 5px 0; }
    </style>
</body>
</html>
